# Option Flow Momentum Strategy Backtest

## 策略说明

这是一个基于期权异常交易流的动量策略回测系统。策略逻辑如下：

1. **信号生成**：监控异常期权交易（大额交易）
2. **入场规则**：在期权异常交易信号后5分钟内买入标的股票
3. **仓位管理**：
   - 每笔交易使用20%的可用资金
   - 保持至少20%的现金储备
   - 每天最多交易4笔
   - 不重复买入相同股票
4. **出场规则**：
   - 止盈：20%
   - 止损：10%
   - 时间出场：第二天开盘价卖出

## 数据处理

- 原始数据时间为UTC+8，需要转换为美东时间（UTC-4）
- 日期需要加1天（由于原始数据处理问题）
- 使用Polygon API获取实时股票价格数据

## 使用方法

1. 安装依赖：
```bash
pip install -r requirements.txt
```

2. 运行回测：
```bash
python option_flow_backtest.py
```

## 输出结果

- 回测过程中会显示每笔交易的详情
- 最终显示总体收益统计
- 生成`backtest_trades.csv`文件，包含所有交易记录

## 注意事项

- 需要有效的Polygon API密钥
- API有频率限制，程序已添加适当的延迟
- 回测基于历史数据，不代表未来表现